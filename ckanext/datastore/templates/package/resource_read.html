{% ckan_extends %}

{% block resource_actions_inner %}
  {{ super() }}
  {% if res.datastore_active %}
    <li>{% snippet 'package/snippets/data_api_button.html', resource=res,  datastore_root_url=c.datastore_api %}</li>
  {% endif %}
{% endblock %}

{% block resource_additional_information_inner %}
  {% if res.datastore_active %}
    {% set ddict=h.datastore_dictionary(res.id) %}
    <div class="module-content">
      <h2>{{ _('Data Dictionary') }}</h2>
      <table class="table table-striped table-bordered table-condensed" data-module="table-toggle-more">
        <thead>
          <tr>
           {% block resource_data_dictionary_titles %}
            <th scope="col">{{ _('Column') }}</th>
            <th scope="col">{{ _('Type') }}</th>
            <th scope="col">{{ _('Label') }}</th>
            <th scope="col">{{ _('Description') }}</th>
            {% endblock %}
          </tr>
        </thead>
        {% for f in ddict %}
          <tr>
            {% block resource_data_dictionary_list %}
            <td>{{ f.id }}</td>
            <td>{{ f.type }}</td>
            <td>{{ h.get_translated(f.get('info', {}), 'label') }}</td>
            <td>{{ h.render_markdown(
              h.get_translated(f.get('info', {}), 'notes')) }}</td>
            {% endblock %}
          </tr>
        {% endfor %}
      </table>
    </div>
  {% endif %}
  {{ super() }}
{% endblock %}
