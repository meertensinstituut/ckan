<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Mocha Tests</title>
    <link rel="stylesheet" href="vendor/mocha.css" />
  </head>
  <body>
    <div id="mocha"></div>
    <div id="fixture" style="position: absolute; top: -9999px; left: -9999px"></div>

    <!-- Test Runner -->
    <script src="./vendor/sinon.js"></script>
    <script src="./vendor/mocha.js"></script>
    <script src="./vendor/chai.js"></script>
    <script>
      mocha.setup('bdd');
      var assert = chai.assert;

      // Export sinon.assert methods onto assert.
      sinon.assert.expose(assert, {prefix: ''});

      var ckan = {ENV: 'testing'};
    </script>

    <!-- Source -->
    <script src="../vendor/jquery.js"></script>
    <script src="../vendor/bootstrap/js/bootstrap-transition.js"></script>
    <script src="../vendor/bootstrap/js/bootstrap-alert.js"></script>
    <script src="../javascript/plugins/jquery.inherit.js"></script>
    <script src="../javascript/plugins/jquery.proxy-all.js"></script>
    <script src="../javascript/plugins/jquery.url-helpers.js"></script>
    <script src="../javascript/plugins/jquery.date-helpers.js"></script>
    <script src="../javascript/plugins/jquery.slug.js"></script>
    <script src="../javascript/plugins/jquery.slug-preview.js"></script>
    <script src="../javascript/plugins/jquery.form-warning.js"></script>
    <script src="../javascript/sandbox.js"></script>
    <script src="../javascript/module.js"></script>
    <script src="../javascript/pubsub.js"></script>
    <script src="../javascript/client.js"></script>
    <script src="../javascript/notify.js"></script>
    <script src="../javascript/i18n.js"></script>
    <script src="../javascript/main.js"></script>
    <script src="../javascript/modules/basic-form.js"></script>
    <script src="../javascript/modules/resource-form.js"></script>
    <script src="../javascript/modules/resource-upload-field.js"></script>
    <script src="../javascript/modules/confirm-delete.js"></script>

    <!-- Suite -->
    <script src="./spec/ckan.spec.js"></script>
    <script src="./spec/module.spec.js"></script>
    <script src="./spec/sandbox.spec.js"></script>
    <script src="./spec/client.spec.js"></script>
    <script src="./spec/notify.spec.js"></script>
    <script src="./spec/modules/resource-form.spec.js"></script>
    <script src="./spec/modules/resource-upload-field.spec.js"></script>
    <script src="./spec/modules/confirm-delete.spec.js"></script>
    <script src="./spec/modules/basic-form.spec.js"></script>
    <script src="./spec/plugins/jquery.inherit.spec.js"></script>
    <script src="./spec/plugins/jquery.proxy-all.spec.js"></script>
    <script src="./spec/plugins/jquery.url-helpers.spec.js"></script>
    <script src="./spec/plugins/jquery.date-helpers.spec.js"></script>
    <script src="./spec/plugins/jquery.slug.spec.js"></script>
    <script src="./spec/plugins/jquery.slug-preview.spec.js"></script>
    <script src="./spec/plugins/jquery.form-warning.spec.js"></script>

    <script>
      beforeEach(function () {
        this.fixture = jQuery('#fixture').empty();
      });

      afterEach(function () {
        this.fixture.empty();
      });

      mocha.run().globals(['ckan', 'setTimeout', 'setInterval', 'clearTimeout', 'clearInterval']);
    </script>
  </body>
</html>
